# HTTP

**HyperText Transfer Protocol**

HTTP는 웹서버에서 받은 다양한 종류의 데이터를 웹브라우저로 옮겨주는 역할을 한다. 이 장에서는 HTTP가 이 역할을 어떻게 수행하는지 설명한다.

<br/>

## 1. 인터넷의 멀티미디어 배달부

HTTP는 TCP 기반 프로토콜로 신뢰성 있는 정보 전송을 보장한다.

> [참고1] TCP 통신 특징

- 연결지향, 신뢰성 있는 통신 서비스
- 연결 - 3way handshaking / 종료 - 4way handshaking
- 데이터 순서 보장

> [참고2] TCP/UDP 기반 프로토콜

| 프로토콜 | UDP | TCP |
| -------- | --- | --- |
| HTTP     | X   | O   |
| SMTP     | X   | O   |
| FTP      | X   | O   |
| DNS      | O   | X   |
| DHCP     | O   | X   |

<br/>

## 2. 웹 클라이언트와 서버

<img width="566" alt="image" src="https://github.com/flataex/http-the-definitive-guide-study/assets/67260437/b3150918-0b4f-4f48-bcd8-94172083904c">
  
클라이언트는 서버에 HTTP 요청을 보내 데이터를 요청하고, 서버는 HTTP 응답으로 데이터를 제공한다.

<br/>

## 3. 리소스

웹 서버가 제공하는 리소스는 HTML, 이미지와 같은 정적 파일도 있지만, 요청에 따라 콘텐츠를 제공하는 프로그램-검색엔진, 게이트웨이 등-도 있다.

### 3.1 미디어 타입

브라우저는 서버에서 받은 리소스를 처리하기 위해 파일의 확장자가 아닌, 서버에서 보낸 **MIME-Type**을 사용한다.  
MIME-Type은 본래 이메일에 첨부된 파일을 텍스트로 전환하여 전송하기 위해 생겨났고,  
현재는 HTTP 통신에서 객체의 유형을 파악하기 위해 쓰이고 있다.  
MIME-Type은 응답 헤더의 **Content-Type** 항목에서 확인할 수 있다.

> [예시] MIME-Type

`text/plain`,`text/css`, `application/json`, `image/jpeg` 등

### 3.2 URI과 URL

웹 서버 리소스의 이름을 URI(Uniform Resource Identifier; 통합 자원 식별자)라고 부른다.  
URL(Uniform Resource Locator)은 URI의 한 형태로, 리소스가 어디에 있는지, 어떻게 접근하는지 명시해준다. 오늘날 대부분의 URI는 URL이다.

> `스킴` https:// `도메인` www.aaa.com `리소스` /sample.png

<br/>

## 4. 트랜잭션

HTTP 트랜잭션은 `요청명령`과 `응답결과`로 이루어져있다.

### 4.1 메소드

요청명령을 지원하는 HTTP 메소드는 아래와 같다.
메소드| 설명
--- | ---
GET | 서버에서 클라이언트로 특정 리소스 전송 요청
POST | 클라이언트 데이터를 서버 게이트웨이 애플리케이션으로 전송 요청
PUT | 클라이언트에서 보낸 리소스를 지정한 이름으로 서버에 저장 요청
DELETE | 지정한 리소스를 서버에서 삭제 요청
HEAD | 지정한 리소스에 대한 응답에서 HTTP 헤더만 요청

### 4.2 상태코드

모든 응답 메시지는 상태코드를 갖는다. (3장 참고)

### 4.3 웹페이지는 여러 객체로 구성될 수 있다.

애플리케이션은 보통 하나의 작업을 수행하기 위해 여러 HTTP 트랜잭션을 수행한다.

<br/>

## 5. 메시지

HTTP 메시지는 일반 텍스트 형식인 `시작줄`과 `헤더`, 데이터를 담는 `본문`으로 이루어진다.

<img width="720" alt="image" src="https://github.com/flataex/http-the-definitive-guide-study/assets/67260437/d4d922ed-29f2-4649-ab38-556082327434">

<br/>

## 6. TCP 커넥션

### 6.1 TCP/IP

<img width="710" alt="image" src="https://github.com/flataex/http-the-definitive-guide-study/assets/67260437/6dd630e3-8b5c-4a82-9b48-4e878dbd4a9d">  

HTTP는 애플리케이션 계층에 속하여 데이터를 전송하기 위해 하위 계층의 TCP를 사용한다. 또, TCP는 하위 계층인 IP를 사용한다. TCP/IP는 TCP와 IP가 층을 이루는, 패킷 교환 네트워크 프로토콜의 집합이다.

### 6.2 접속, IP 주소 그리고 포트번호

클라이언트가 데이터를 전송하기에 앞서, IP(Internet Protocol)과 포트번호를 이용해 클라이언트와 서버 간 TCP/IP 커넥션이 맺어져야한다. URL은 DNS를 통해 IP 정보로 변환되고, URL에 포트 번호가 없는 경우 기본값 80으로 가정하여 연결된다.

<br/>

## 7. 웹의 구성요소

### 7.1 proxy

proxy 서버는 클라이언트와 서버 사이에 위치하여, 클라이언트의 요청을 받아 서버에 전달한다. 보안 및 필터링 역할을 한다.

### 7.2 캐시

클라이언트는 origin 서버에 접근하는 것 보다 더 빠르게 캐시된 데이터를 받을 수 있다.

> [참고] 브라우저 캐시 / 프록시 캐시
> 사용자 로컬에서 캐시되는 브라우저 캐시와 달리 프 록시 캐시는 서버에 저장되기 때문에 여러 사용자에게 제공될 수 있다.

### 7.3 게이트웨이

HTTP 트래픽을 다른 프로토콜로 변환하기 위해 사용된다.

> [예시] HTTP/FTP 게이트웨이는 FTP URI에 대한 HTTP 요청을 받아들인 뒤, FTP 프로 토콜을 이용해 문서를 가져온다

### 7.4 터널

`애플리케이션 클라이언트`와 `애플리케이션 서버` 사이에 `SSH 클라이언트`와 `SSH 서버`가 있다고 할 때, SSH 클라이언트를 통해 SSH 서버에 접속을 하면 둘 사이에 연결이 이루어지는데 이 연결 통로를 터널이라고 한다.  
암호화된 SSL 트래픽을 HTTP 채널을 통해 목적지 서버로 전송할 수 있게 된다.

### 7.5 에이전트

사용자를 위해 HTTP 요청을 만들어주는 클라이언트 프로그램이다.

> [예시] 사람의 통제 없이 스스로 웹을 돌아다니며 HTTP 트랜잭션을 일으키고 콘텐츠를 받아오는 자동화된 사용자 에이전트
